/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'javacompiler.java-application-conventions'
    id 'com.github.johnrengelman.shadow' version '8.1.1'
}

dependencies {
    implementation files('../lib/cs132.jar')
    implementation project(':typechecker')
    implementation project(':translator')
    implementation project(':registerallocator')
    implementation project(':riscvtranslator')
    implementation group: 'commons-cli', name: 'commons-cli', version: '1.4'
    implementation 'commons-io:commons-io:2.13.0'
}

application {
    // Define the main class for the application.
    mainClass = 'javacompiler.compiler.Compiler'
}

jar {
    // Include dependencies in the JAR
    manifest {
        attributes 'Main-Class': application.mainClass
    }
//    from { configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } }
//    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

shadowJar {
    archiveBaseName.set('java-compiler')
    archiveClassifier.set('')
    archiveVersion.set('1.0')
}